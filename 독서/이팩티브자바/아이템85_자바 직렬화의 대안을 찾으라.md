* 직렬화는 보이지 않는 생성자, API와 구현 사이의 모호해진 경계, 잠재적인 정확성 문제, 성능, 보안, 유지보수성 등 그 대가가 컸다
* 직렬화의 근본적인 문제는 공격 범위가 너무 넓고 지속적으로 더 넓어져 방어하기 어렵다는 점이다
  * readObject메서드는 (Serializable인터페이스를 구현했다면)클래스패스 안의 거의 모든 타입의 객체를 만들어낼 수 있고
  * 바이트 스트림을 역직렬화 하는 과정에서 이 메서드는 그 타입들 안의 모든 코드를 수행할 수 있다
* 역직렬화 과정에서 호출되어 잠재적으로 위험한 동작을 수행하는 메서드들을 가젯이라고 하는데 자바 라이브러리나 널리 쓰이느 서드파티<br>
라이브러리에서도 여러 가젯을 함께 사용하는 가젯체인들이 발견되곤 한다
* 가젯까지 갈 것도 없이, 역직렬화에 시간이 오래 걸리는 짧은 스트림을 역직렬화하는 것만으로도 서비스 거부 공격에 쉽게 노출될 수 있다(역직렬화 폭탄)
* 직렬화 위험을 회피하는 가장 좋은 방법은 아무것도 역직렬화하지 않는 것이다
* 객체와 바이트 시퀀스를 변환해주는 다른 메커니즘이 많이 있다
  * JSON, 프로토버퍼 와 같은 크로스-플랫폼 구조화된 데이터 표현
* 레거시 시스템에서 직렬화를 배제할 수 없을때의 차선책은 신뢰할 수 없는 데이터는 절대 역직렬화하지 않는 것이다
  * 역직렬화 필터링을 사용하자(java.io.ObjectInputFilter)
  * '기본 수용'모드에서는 블랙리스트에 기록된 잠재적으로 위험한 클래스들을 거부한다
  * 반대로 '기본 거부'모드에서는 화이트리스트에 기록된 안전하다고 알려진 클래스들만 수용한다
  * 블랙리스트 방식 보다는 화이트 리스트 방식을 추천한다 

```
직렬화는 위험하니 피해야 한다. 시스템을 밑바닥부터 설계한다면 JSON이나 프로토콜버퍼
같은 대안을 사용하자. 신뢰할 수 없는 데이터는 역직렬화하지 말자. 꼭 해야 한다면
객체 역직렬화 필터링을 사용하되, 이마저도 모든 공격을 막아줄 수 없음을 기억하자.
클래스가 직렬화를 지원하도록 만들지 말고, 꼭 그렇게 만들어야 한다면 정말 신경써서
작성해야 한다.
```